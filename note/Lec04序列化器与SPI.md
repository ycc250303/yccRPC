# 序列化器与 SPI

* 除了JDK序列化，有没有更好的实现方式？
* 如何让开发者指定序列化器？
* 如何让开发中自定义序列化器？

## 设计方案

### 序列化器实现方式

#### JSON

* 优点
  * 可读性好
  * 跨编程语言支持
* 缺点
  * 序列化后数据量相对大，因为JSON使用文本存储，需要额外的字符表示键值和数据结构
  * 对于复杂数据结构和循环引用处理较差

#### Hessian

* 优点
  * 二进制，序列化后的数据量小，网络传输效率高
  * 支持跨语言，适用于分布式
* 缺点
  * 性能较 JSON 略低，需要将对象转换为二进制
  * 对象必须实现 Serializable 接口，限制可序列化对象范围

#### Kryo

* 优点
  * 高性能，序列化/反序列化速度快
  * 支持循环引用和自定义序列化器
  * 无须实现 Serializable 接口，可以序列化任意对象
* 缺点
  * 只支持Java
  * 序列化格式对可读性和调试不友好

#### Protobuf

* 优点
  * 高效、数据量极小
  * 跨语言
* 缺点
  * 配置复杂
  * 对象序列化格式不易读懂、不易调试

### 动态使用序列化器

* 原先的序列化器选择为硬编码
* `Serializer serializer = new JdkSerializer();`
* 应通过配置文件指定使用的序列化器

### 自定义序列化器

* 使用SPI机制实现
* SPI（Service Provider Interface）服务提供接口，用于实现模块化开发和插件化扩展
* SPI 允许服务提供者通过配置文件将自己的实现注册到系统中，通过反射机制动态加载。无需修改原始代码，实现解耦，提高扩展性
